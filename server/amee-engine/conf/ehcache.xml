<ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:noNamespaceSchemaLocation="ehcache.xsd">

    <diskStore path="java.io.tmp"/>

    <!-- **** Default cache configuration **** -->

    <!-- NOTE: this should not get used because caches are explicitly defined below -->
    <defaultCache maxElementsInMemory="4000"
                  eternal="false"
                  timeToIdleSeconds="1800"
                  timeToLiveSeconds="3600"
                  overflowToDisk="false">
    </defaultCache>

    <!-- JavaDoc: Tracks the timestamps of the most recent updates to particular tables.
    It is important that the cache timeout of the underlying cache implementation
    be set to a higher value than the timeouts of any of the query caches. In fact,
    we recommend that the the underlying cache not be configured for expiry at all.
    Note, in particular, that an LRU cache expiry policy is never appropriate. -->
    <!-- NOTE: maxElementsInMemory should match (or exceed # of tables). -->
    <cache name="org.hibernate.cache.UpdateTimestampsCache"
           maxElementsInMemory="40"
           eternal="true"
           overflowToDisk="false">
    </cache>

    <!-- JavaDoc: The standard implementation of the Hibernate QueryCache interface.
    This implementation is very good at recognizing stale query results and
    re-running queries when it detects this condition, recaching the new results.
    NOTE: this should not get used because query caches are explicitly defined below -->
    <cache name="org.hibernate.cache.StandardQueryCache"
           maxElementsInMemory="1000"
           eternal="false"
           timeToIdleSeconds="1800"
           timeToLiveSeconds="3600"
           overflowToDisk="false">
    </cache>

    <!-- **** Includes **** -->

    <!--
        **** Data capacity (collected from DB, with some contingency) ****
        5 Environments
        40 APIVersions
        200 Data Categories
        200 Item Definitions
        200 Algorithms
        100 Value Definitions
        1000 Item Value Definitions
        10,000 Data Items (DI)
        50,000 Data Item Values (DIV)

        **** Profile capacity assumptions (estimates) ****
        50 concurrent Profiles (P)
        50 Profile Items (PI) per P
        2500 total PIs (Ps * PIs per P)
        3 Profile Item Values (PIV) per PI
        7,500 total PIVs (total PIs * PIVs per PI)

        **** Aggregates ****
        12,500 Items (DIs + PIs)
        57,500 Item Values (PIVs + DIVs)

        **** Queries?? ****

        **** Application objects ****
        60 Data Sheets (= Data Categories)
        6,000 Profile Sheets (Profiles * DCs * 2 dates)
        50 Profile PIGs (= Profiles)
    -->

    <!-- **** AMEE Entities **** -->

    <!-- APIVersion -->
    <cache name="com.amee.domain.APIVersion"
           maxElementsInMemory="40"
           eternal="false"
           overflowToDisk="false"
           timeToIdleSeconds="900"
           timeToLiveSeconds="1800"
           memoryStoreEvictionPolicy="LFU">
    </cache>

    <!-- Algorithm -->
    <cache name="com.amee.domain.algorithm.AbstractAlgorithm"
           maxElementsInMemory="200"
           eternal="false"
           overflowToDisk="false"
           timeToIdleSeconds="900"
           timeToLiveSeconds="1800"
           memoryStoreEvictionPolicy="LFU">
    </cache>

    <!-- Algorithm -->
    <cache name="com.amee.domain.algorithm.Algorithm"
           maxElementsInMemory="200"
           eternal="false"
           overflowToDisk="false"
           timeToIdleSeconds="900"
           timeToLiveSeconds="1800"
           memoryStoreEvictionPolicy="LFU">
    </cache>

    <!-- DataCategory -->
    <cache name="com.amee.domain.data.DataCategory"
           maxElementsInMemory="200"
           eternal="false"
           overflowToDisk="false"
           timeToIdleSeconds="900"
           timeToLiveSeconds="1800"
           memoryStoreEvictionPolicy="LFU">
    </cache>

    <cache name="com.amee.domain.data.DataCategory.localeNames"
           maxElementsInMemory="200"
           eternal="false"
           overflowToDisk="false"
           timeToIdleSeconds="900"
           timeToLiveSeconds="1800"
           memoryStoreEvictionPolicy="LFU">
    </cache>

    <!-- Item -->
    <cache name="com.amee.domain.data.Item"
           maxElementsInMemory="12500"
           eternal="false"
           overflowToDisk="false"
           timeToIdleSeconds="900"
           timeToLiveSeconds="1800"
           memoryStoreEvictionPolicy="LFU">
    </cache>
    <cache name="com.amee.domain.data.Item.itemValues"
           maxElementsInMemory="57500"
           eternal="false"
           overflowToDisk="false"
           timeToIdleSeconds="900"
           timeToLiveSeconds="1800"
           memoryStoreEvictionPolicy="LFU">
    </cache>

    <!-- ItemDefinition -->
    <cache name="com.amee.domain.data.ItemDefinition"
           maxElementsInMemory="200"
           eternal="false"
           overflowToDisk="false"
           timeToIdleSeconds="900"
           timeToLiveSeconds="1800"
           memoryStoreEvictionPolicy="LFU">
    </cache>
    <cache name="com.amee.domain.data.ItemDefinition.algorithms"
           maxElementsInMemory="200"
           eternal="false"
           overflowToDisk="false"
           timeToIdleSeconds="900"
           timeToLiveSeconds="1800"
           memoryStoreEvictionPolicy="LFU">
    </cache>
    <cache name="com.amee.domain.data.ItemDefinition.itemValueDefinitions"
           maxElementsInMemory="200"
           eternal="false"
           overflowToDisk="false"
           timeToIdleSeconds="900"
           timeToLiveSeconds="1800"
           memoryStoreEvictionPolicy="LFU">
    </cache>

    <cache name="com.amee.domain.data.ItemDefinition.localeNames"
           maxElementsInMemory="200"
           eternal="false"
           overflowToDisk="false"
           timeToIdleSeconds="900"
           timeToLiveSeconds="1800"
           memoryStoreEvictionPolicy="LFU">
    </cache>

    <!-- ItemValue -->
    <cache name="com.amee.domain.data.ItemValue"
           maxElementsInMemory="57500"
           eternal="false"
           overflowToDisk="false"
           timeToIdleSeconds="900"
           timeToLiveSeconds="1800"
           memoryStoreEvictionPolicy="LFU">
    </cache>

    <!-- ItemValueDefinition -->
    <cache name="com.amee.domain.data.ItemValueDefinition"
           maxElementsInMemory="1000"
           eternal="false"
           overflowToDisk="false"
           timeToIdleSeconds="900"
           timeToLiveSeconds="1800"
           memoryStoreEvictionPolicy="LFU">
    </cache>
    <cache name="com.amee.domain.data.ItemValueDefinition.apiVersions"
           maxElementsInMemory="1000"
           eternal="false"
           overflowToDisk="false"
           timeToIdleSeconds="900"
           timeToLiveSeconds="1800"
           memoryStoreEvictionPolicy="LFU">
    </cache>

    <cache name="com.amee.domain.data.ItemValueDefinition.localeNames"
           maxElementsInMemory="200"
           eternal="false"
           overflowToDisk="false"
           timeToIdleSeconds="900"
           timeToLiveSeconds="1800"
           memoryStoreEvictionPolicy="LFU">
    </cache>

    <!-- Profile -->
    <cache name="com.amee.domain.profile.Profile"
           maxElementsInMemory="50"
           eternal="false"
           overflowToDisk="false"
           timeToIdleSeconds="900"
           timeToLiveSeconds="1800"
           memoryStoreEvictionPolicy="LFU">
    </cache>

    <!-- ValueDefinition -->
    <cache name="com.amee.domain.ValueDefinition"
           maxElementsInMemory="100"
           eternal="false"
           overflowToDisk="false"
           timeToIdleSeconds="900"
           timeToLiveSeconds="1800"
           memoryStoreEvictionPolicy="LFU">
    </cache>

    <!-- **** Queries **** -->

    <!-- DataServiceDAO -->
    <cache name="query.dataService"
           maxElementsInMemory="2000"
           eternal="false"
           overflowToDisk="false"
           timeToIdleSeconds="900"
           timeToLiveSeconds="1800"
           memoryStoreEvictionPolicy="LFU">
    </cache>

    <!-- ProfileServiceDAO -->
    <cache name="query.profileService"
           maxElementsInMemory="2000"
           eternal="false"
           overflowToDisk="false"
           timeToIdleSeconds="900"
           timeToLiveSeconds="1800"
           memoryStoreEvictionPolicy="LFU">
    </cache>

    <!-- **** Application objects **** -->

    <!-- Data Sheets -->
    <cache name="DrillDownChoices"
           maxElementsInMemory="1000"
           eternal="false"
           overflowToDisk="false"
           timeToIdleSeconds="900"
           timeToLiveSeconds="1800"
           memoryStoreEvictionPolicy="LFU">
    </cache>

    <!-- Data Sheets -->
    <cache name="DataSheets"
           maxElementsInMemory="60"
           eternal="false"
           overflowToDisk="false"
           timeToIdleSeconds="900"
           timeToLiveSeconds="1800"
           memoryStoreEvictionPolicy="LFU">
    </cache>

    <!-- Environment Path Item Groups -->
    <cache name="EnvironmentPIGs"
           maxElementsInMemory="5"
           eternal="false"
           overflowToDisk="false"
           timeToIdleSeconds="900"
           timeToLiveSeconds="1800"
           memoryStoreEvictionPolicy="LFU">
    </cache>

    <!-- Profile Sheets -->
    <cache name="ProfileSheets"
           maxElementsInMemory="6000"
           eternal="false"
           overflowToDisk="false"
           timeToIdleSeconds="900"
           timeToLiveSeconds="1800"
           memoryStoreEvictionPolicy="LFU">
    </cache>

    <!-- **** Kiwi - Entities **** -->

    <!-- Environment -->
    <cache name="com.amee.domain.environment.Environment"
           maxElementsInMemory="10"
           eternal="false"
           overflowToDisk="false"
           timeToIdleSeconds="900"
           timeToLiveSeconds="1800"
           memoryStoreEvictionPolicy="LFU">
    </cache>

    <!-- User -->
    <cache name="com.amee.domain.auth.User"
           maxElementsInMemory="100"
           eternal="false"
           overflowToDisk="false"
           timeToIdleSeconds="900"
           timeToLiveSeconds="1800"
           memoryStoreEvictionPolicy="LFU">
    </cache>

    <!-- Site -->
    <cache name="com.amee.domain.site.Site"
           maxElementsInMemory="30"
           eternal="false"
           overflowToDisk="false"
           timeToIdleSeconds="900"
           timeToLiveSeconds="1800"
           memoryStoreEvictionPolicy="LFU">
    </cache>
    <cache name="com.amee.domain.site.Site.siteApps"
           maxElementsInMemory="30"
           eternal="false"
           overflowToDisk="false"
           timeToIdleSeconds="900"
           timeToLiveSeconds="1800"
           memoryStoreEvictionPolicy="LFU">
    </cache>

    <!-- SiteApps -->

    <cache name="com.amee.domain.site.SiteApp"
           maxElementsInMemory="100"
           eternal="false"
           overflowToDisk="false"
           timeToIdleSeconds="900"
           timeToLiveSeconds="1800"
           memoryStoreEvictionPolicy="LFU">
    </cache>

    <!-- Group -->
    <cache name="com.amee.domain.auth.Group"
           maxElementsInMemory="50"
           eternal="false"
           overflowToDisk="false"
           timeToIdleSeconds="900"
           timeToLiveSeconds="1800"
           memoryStoreEvictionPolicy="LFU">
    </cache>

    <!-- GroupPrinciple -->
    <cache name="com.amee.domain.auth.GroupPrinciple"
           maxElementsInMemory="50"
           eternal="false"
           overflowToDisk="false"
           timeToIdleSeconds="900"
           timeToLiveSeconds="1800"
           memoryStoreEvictionPolicy="LFU">
    </cache>

    <!-- Permission -->
    <cache name="com.amee.domain.auth.Permission"
           maxElementsInMemory="20"
           eternal="false"
           overflowToDisk="false"
           timeToIdleSeconds="900"
           timeToLiveSeconds="1800"
           memoryStoreEvictionPolicy="LFU">
    </cache>

    <!-- App -->
    <cache name="com.amee.domain.site.App"
           maxElementsInMemory="50"
           eternal="false"
           overflowToDisk="false"
           timeToIdleSeconds="900"
           timeToLiveSeconds="1800"
           memoryStoreEvictionPolicy="LFU">
    </cache>

    <!-- **** Kiwi - Queries **** -->

    <!-- AppServiceDAO -->
    <cache name="query.appService"
           maxElementsInMemory="200"
           eternal="false"
           overflowToDisk="false"
           timeToIdleSeconds="900"
           timeToLiveSeconds="1800"
           memoryStoreEvictionPolicy="LFU">
    </cache>

    <!-- AuthenticationService -->
    <cache name="query.authenticationService"
           maxElementsInMemory="200"
           eternal="false"
           overflowToDisk="false"
           timeToIdleSeconds="900"
           timeToLiveSeconds="1800"
           memoryStoreEvictionPolicy="LFU">
    </cache>

    <!-- SiteService -->
    <cache name="query.siteService"
           maxElementsInMemory="200"
           eternal="false"
           overflowToDisk="false"
           timeToIdleSeconds="900"
           timeToLiveSeconds="1800"
           memoryStoreEvictionPolicy="LFU">
    </cache>

    <!-- EnvironmentService -->
    <cache name="query.environmentService"
           maxElementsInMemory="200"
           eternal="false"
           overflowToDisk="false"
           timeToIdleSeconds="900"
           timeToLiveSeconds="1800"
           memoryStoreEvictionPolicy="LFU">
    </cache>

    <!-- FreeMarkerConfigurations -->
    <cache name="FreeMarkerConfigurations"
           maxElementsInMemory="200"
           eternal="false"
           overflowToDisk="false"
           timeToIdleSeconds="900"
           timeToLiveSeconds="1800"
           memoryStoreEvictionPolicy="LFU">
    </cache>

</ehcache>